local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = PlayerGui
ScreenGui.Enabled = true
ScreenGui.ResetOnSpawn = false
ScreenGui.Name = "JSYCheatGUI"

-- Main Frame (Lebih kecil)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 280)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -140)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 60, 120)
MainFrame.BackgroundTransparency = 0.05
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = MainFrame

-- Border dengan warna biru
local mainStroke = Instance.new("UIStroke")
mainStroke.Color = Color3.fromRGB(70, 130, 200)
mainStroke.Thickness = 2
mainStroke.Transparency = 0.2
mainStroke.Parent = MainFrame

-- Gradient Background biru
local uiGradient = Instance.new("UIGradient")
uiGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 50, 100)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 80, 160))
}
uiGradient.Rotation = 45
uiGradient.Parent = MainFrame

-- Container utama untuk profile dan buttons
local Container = Instance.new("Frame")
Container.Size = UDim2.new(1, 0, 1, -35) -- Kurangi tinggi untuk navbar
Container.Position = UDim2.new(0, 0, 0, 35) -- Geser ke bawah untuk navbar
Container.BackgroundTransparency = 1
Container.Parent = MainFrame

-- Profile Section (Kiri)
local ProfileFrame = Instance.new("Frame")
ProfileFrame.Size = UDim2.new(0, 150, 1, 0)
ProfileFrame.BackgroundColor3 = Color3.fromRGB(40, 80, 160)
ProfileFrame.BackgroundTransparency = 0.2
ProfileFrame.Parent = Container

local profileCorner = Instance.new("UICorner")
profileCorner.CornerRadius = UDim.new(0, 12)
profileCorner.Parent = ProfileFrame

-- Profile Content
local ProfileContent = Instance.new("Frame")
ProfileContent.Size = UDim2.new(1, -10, 1, -10)
ProfileContent.Position = UDim2.new(0, 5, 0, 5)
ProfileContent.BackgroundTransparency = 1
ProfileContent.Parent = ProfileFrame

-- Profile Picture
local ProfilePicture = Instance.new("ImageLabel")
ProfilePicture.Size = UDim2.new(0, 60, 0, 60)
ProfilePicture.Position = UDim2.new(0.5, -30, 0, 10)
ProfilePicture.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ProfilePicture.BorderSizePixel = 0
ProfilePicture.Parent = ProfileContent

local pictureCorner = Instance.new("UICorner")
pictureCorner.CornerRadius = UDim.new(0, 30)
pictureCorner.Parent = ProfilePicture

local pictureStroke = Instance.new("UIStroke")
pictureStroke.Color = Color3.fromRGB(100, 150, 220)
pictureStroke.Thickness = 2
pictureStroke.Parent = ProfilePicture

-- Load player thumbnail
local userId = Player.UserId
local thumbType = Enum.ThumbnailType.HeadShot
local thumbSize = Enum.ThumbnailSize.Size420x420

game:GetService("Players"):GetUserThumbnailAsync(userId, thumbType, thumbSize, function(content)
    ProfilePicture.Image = content
end)

-- Player Name
local PlayerName = Instance.new("TextLabel")
PlayerName.Size = UDim2.new(1, 0, 0, 20)
PlayerName.Position = UDim2.new(0, 0, 0, 75)
PlayerName.BackgroundTransparency = 1
PlayerName.Text = Player.Name
PlayerName.Font = Enum.Font.GothamBold
PlayerName.TextSize = 14
PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerName.TextXAlignment = Enum.TextXAlignment.Center
PlayerName.Parent = ProfileContent

-- Display Name
local DisplayName = Instance.new("TextLabel")
DisplayName.Size = UDim2.new(1, 0, 0, 18)
DisplayName.Position = UDim2.new(0, 0, 0, 95)
DisplayName.BackgroundTransparency = 1
DisplayName.Text = "@" .. Player.DisplayName
DisplayName.Font = Enum.Font.Gotham
DisplayName.TextSize = 12
DisplayName.TextColor3 = Color3.fromRGB(200, 220, 255)
DisplayName.TextXAlignment = Enum.TextXAlignment.Center
DisplayName.Parent = ProfileContent

-- Age
local PlayerAge = Instance.new("TextLabel")
PlayerAge.Size = UDim2.new(1, 0, 0, 16)
PlayerAge.Position = UDim2.new(0, 0, 0, 115)
PlayerAge.BackgroundTransparency = 1
PlayerAge.Text = "Age: " .. Player.AccountAge .. " days"
PlayerAge.Font = Enum.Font.Gotham
PlayerAge.TextSize = 11
PlayerAge.TextColor3 = Color3.fromRGB(180, 200, 240)
PlayerAge.TextXAlignment = Enum.TextXAlignment.Center
PlayerAge.Parent = ProfileContent

-- Garis Pemisah (dari atas ke bawah)
local Divider = Instance.new("Frame")
Divider.Size = UDim2.new(0, 2, 1, 0) -- Panjang penuh dari atas ke bawah
Divider.Position = UDim2.new(0, 150, 0, 0)
Divider.BackgroundColor3 = Color3.fromRGB(70, 130, 200)
Divider.BorderSizePixel = 0
Divider.Parent = Container

local dividerCorner = Instance.new("UICorner")
dividerCorner.CornerRadius = UDim.new(1, 0)
dividerCorner.Parent = Divider

-- Buttons Section (Kanan) dengan Scroll
local ButtonsFrame = Instance.new("Frame")
ButtonsFrame.Size = UDim2.new(1, -170, 1, -10)
ButtonsFrame.Position = UDim2.new(0, 160, 0, 5)
ButtonsFrame.BackgroundTransparency = 1
ButtonsFrame.ClipsDescendants = true
ButtonsFrame.Parent = Container

-- ScrollFrame untuk tombol-tombol
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(1, 0, 1, 0)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 220)
ScrollFrame.ScrollBarImageTransparency = 0.5
ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.Parent = ButtonsFrame

-- Grid untuk tombol-tombol (2 kolom)
local ButtonGrid = Instance.new("UIGridLayout")
ButtonGrid.CellSize = UDim2.new(0, 150, 0, 35)
ButtonGrid.CellPadding = UDim2.new(0, 8, 0, 8)
ButtonGrid.HorizontalAlignment = Enum.HorizontalAlignment.Center
ButtonGrid.VerticalAlignment = Enum.VerticalAlignment.Top
ButtonGrid.SortOrder = Enum.SortOrder.LayoutOrder
ButtonGrid.StartCorner = Enum.StartCorner.TopLeft
ButtonGrid.Parent = ScrollFrame

-- Update canvas size
ButtonGrid:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ButtonGrid.AbsoluteContentSize.Y + 10)
end)

-- Navbar yang lebih besar
local Navbar = Instance.new("Frame")
Navbar.Size = UDim2.new(1, 0, 0, 30) -- Lebih besar
Navbar.BackgroundColor3 = Color3.fromRGB(25, 50, 100)
Navbar.BackgroundTransparency = 0.1
Navbar.Parent = MainFrame

local navCorner = Instance.new("UICorner")
navCorner.CornerRadius = UDim.new(0, 12)
navCorner.Parent = Navbar

-- Navbar Title
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -80, 1, 0)
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "JSY CHEAT MENU"
TitleLabel.Font = Enum.Font.GothamBlack
TitleLabel.TextSize = 14 -- Sedikit lebih besar
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = Navbar

-- Tombol Minimize yang lebih besar
local MinimizeBtn = Instance.new("TextButton")
MinimizeBtn.Size = UDim2.new(0, 25, 0, 25) -- Lebih besar
MinimizeBtn.Position = UDim2.new(1, -55, 0.5, -12) -- Posisi disesuaikan
MinimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
MinimizeBtn.BackgroundTransparency = 0.1
MinimizeBtn.Text = "-"
MinimizeBtn.Font = Enum.Font.GothamBold
MinimizeBtn.TextSize = 16 -- Lebih besar
MinimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeBtn.Parent = Navbar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = MinimizeBtn

local minimizeStroke = Instance.new("UIStroke")
minimizeStroke.Color = Color3.fromRGB(255, 221, 87)
minimizeStroke.Thickness = 1
minimizeStroke.Parent = MinimizeBtn

-- X Button yang lebih besar
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 25, 0, 25) -- Lebih besar
CloseBtn.Position = UDim2.new(1, -25, 0.5, -12) -- Posisi disesuaikan
CloseBtn.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
CloseBtn.BackgroundTransparency = 0.1
CloseBtn.Text = "×"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 16 -- Lebih besar
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Parent = Navbar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = CloseBtn

local closeStroke = Instance.new("UIStroke")
closeStroke.Color = Color3.fromRGB(255, 100, 100)
closeStroke.Thickness = 1
closeStroke.Parent = CloseBtn

-- Floating Mini GUI
local MiniFrame = Instance.new("TextButton")
MiniFrame.Size = UDim2.new(0, 60, 0, 30)
MiniFrame.Position = UDim2.new(1, -70, 0, 10)
MiniFrame.BackgroundColor3 = Color3.fromRGB(30, 60, 120)
MiniFrame.BackgroundTransparency = 0.1
MiniFrame.Text = "JSY"
MiniFrame.Font = Enum.Font.GothamBlack
MiniFrame.TextSize = 12
MiniFrame.TextColor3 = Color3.fromRGB(255, 255, 255)
MiniFrame.TextStrokeTransparency = 0.8
MiniFrame.Visible = false
MiniFrame.Active = true
MiniFrame.Draggable = true
MiniFrame.Parent = ScreenGui

local miniCorner = Instance.new("UICorner")
miniCorner.CornerRadius = UDim.new(0, 8)
miniCorner.Parent = MiniFrame

local miniStroke = Instance.new("UIStroke")
miniStroke.Color = Color3.fromRGB(70, 130, 200)
miniStroke.Thickness = 1.5
miniStroke.Parent = MiniFrame

-- Logika close & reopen dengan animasi
CloseBtn.MouseButton1Click:Connect(function()
    local tween = TweenService:Create(MainFrame, TweenInfo.new(0.2), {Size = UDim2.new(0, 0, 0, 0)})
    tween:Play()
    tween.Completed:Wait()
    ScreenGui:Destroy()
end)

MinimizeBtn.MouseButton1Click:Connect(function()
    local tween = TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 0, 0, 0)})
    tween:Play()
    tween.Completed:Connect(function()
        MainFrame.Visible = false
        MiniFrame.Visible = true
    end)
end)

MiniFrame.MouseButton1Click:Connect(function()
    MiniFrame.Visible = false
    MainFrame.Visible = true
    MainFrame.Size = UDim2.new(0, 0, 0, 0)
    local tween = TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 500, 0, 280)})
    tween:Play()
end)

-- VARIABEL UNTUK MENYIMPAN STATE TOMBOL
local buttonStates = {}

-- Fungsi bikin tombol dengan design baru
local function createButton(icon, text)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 150, 0, 35)
    btn.BackgroundColor3 = Color3.fromRGB(50, 100, 180)
    btn.BackgroundTransparency = 0.1
    btn.Text = icon .. "  " .. text
    btn.TextSize = 12
    btn.Font = Enum.Font.GothamBold
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextXAlignment = Enum.TextXAlignment.Left
    btn.LayoutOrder = 0
    btn.AutoButtonColor = false -- PENTING: Non-aktifkan auto button color
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    local btnStroke = Instance.new("UIStroke")
    btnStroke.Color = Color3.fromRGB(100, 150, 220)
    btnStroke.Thickness = 1.5
    btnStroke.Parent = btn
    
    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 12)
    padding.Parent = btn

    -- Simpan warna default
    local defaultColor = Color3.fromRGB(50, 100, 180)
    local hoverColor = Color3.fromRGB(70, 130, 200)
    local activeColor = Color3.fromRGB(76, 175, 80) -- Hijau

    -- Simpan state tombol
    buttonStates[btn] = false

    -- Hover effects
    btn.MouseEnter:Connect(function()
        if not buttonStates[btn] then -- Jika tidak dalam state ON
            TweenService:Create(btn, TweenInfo.new(0.2), {
                BackgroundColor3 = hoverColor
            }):Play()
        end
    end)
    
    btn.MouseLeave:Connect(function()
        if not buttonStates[btn] then -- Jika tidak dalam state ON
            TweenService:Create(btn, TweenInfo.new(0.2), {
                BackgroundColor3 = defaultColor
            }):Play()
        end
    end)

    -- Click effect
    btn.MouseButton1Down:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.1), {
            BackgroundColor3 = Color3.fromRGB(40, 80, 160)
        }):Play()
    end)
    
    btn.MouseButton1Up:Connect(function()
        if not buttonStates[btn] then
            TweenService:Create(btn, TweenInfo.new(0.1), {
                BackgroundColor3 = hoverColor
            }):Play()
        else
            TweenService:Create(btn, TweenInfo.new(0.1), {
                BackgroundColor3 = activeColor
            }):Play()
        end
    end)

    btn.Parent = ScrollFrame
    return btn
end

-- Fungsi untuk update tombol ketika aktif/non-aktif
local function setButtonActive(button, active)
    buttonStates[button] = active
    if active then
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(76, 175, 80) -- Hijau saat aktif
        }):Play()
        TweenService:Create(button:FindFirstChildOfClass("UIStroke"), TweenInfo.new(0.2), {
            Color = Color3.fromRGB(100, 200, 100)
        }):Play()
    else
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(50, 100, 180) -- Warna biru awal
        }):Play()
        TweenService:Create(button:FindFirstChildOfClass("UIStroke"), TweenInfo.new(0.2), {
            Color = Color3.fromRGB(100, 150, 220)
        }):Play()
    end
end

-- Tombol Script
local SpectatorBtn = createButton("👁️", "Spectator")
local RecBtn = createButton("🎥", "Rec")

SpectatorBtn.MouseButton1Click:Connect(function()
    local success, response = pcall(function()
        return game:HttpGet("https://raw.githubusercontent.com/Biontoken/Map-gunung/refs/heads/main/targetkick.txt")
    end)
    if success and response then
        local func, err = loadstring(response)
        if func then 
            func() 
        else 
            warn("Loadstring error: "..tostring(err)) 
        end
    else 
        warn("HttpGet failed for Spectator") 
    end
end)

RecBtn.MouseButton1Click:Connect(function()
    local success, response = pcall(function()
        return game:HttpGet("https://raw.githubusercontent.com/Biontoken/Map-gunung/refs/heads/main/rec.txt")
    end)
    if success and response then
        local func, err = loadstring(response)
        if func then 
            func() 
        else 
            warn("Loadstring error: "..tostring(err)) 
        end
    else 
        warn("HttpGet failed for Rec") 
    end
end)

-- Tombol Airwalk
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

local AirwalkActive = false
local AirWPart = nil
local baseY = nil

local AirwalkBtn = createButton("🚶", "Airwalk")

-- Fungsi aktifkan Airwalk
local function StartAirwalk()
    if AirWPart then return end
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local root = character:WaitForChild("HumanoidRootPart")
    local humanoid = character:WaitForChild("Humanoid")

    AirWPart = Instance.new("Part", Workspace)
    AirWPart.Size = Vector3.new(7, 1, 3)
    AirWPart.Anchored = true
    AirWPart.Transparency = 1
    AirWPart.CanCollide = true
    AirWPart.Name = "Airwalk"

    baseY = root.Position.Y - (root.Size.Y/2 + 0.5)
    AirWPart.Position = Vector3.new(root.Position.X, baseY, root.Position.Z)

    -- Update posisi horizontal
    task.spawn(function()
        while AirwalkActive and AirWPart do
            AirWPart.Position = Vector3.new(root.Position.X, AirWPart.Position.Y, root.Position.Z)
            task.wait(0.05)
        end
    end)

    -- Lompat sekali (angkat part)
    humanoid.StateChanged:Connect(function(_, new)
        if not AirwalkActive then return end
        if new == Enum.HumanoidStateType.Jumping then
            if root and AirWPart then
                AirWPart.Position = Vector3.new(AirWPart.Position.X, root.Position.Y - (root.Size.Y/16 + 0), AirWPart.Position.Z)
            end
        end
    end)
end

-- Fungsi matikan Airwalk
local function StopAirwalk()
    AirwalkActive = false
    if AirWPart then
        AirWPart:Destroy()
        AirWPart = nil
    end
end

-- Klik tombol Airwalk
AirwalkBtn.MouseButton1Click:Connect(function()
    AirwalkActive = not AirwalkActive
    if AirwalkActive then
        StartAirwalk()
        setButtonActive(AirwalkBtn, true)
    else
        StopAirwalk()
        setButtonActive(AirwalkBtn, false)
    end
end)

-- Reset saat respawn
LocalPlayer.CharacterAdded:Connect(function()
    StopAirwalk()
    setButtonActive(AirwalkBtn, false)
end)

-- Lampu Kepala
local Player = game.Players.LocalPlayer

local LampBtn = createButton("💡", "Lampu")
local lampOn = false
local headLamp = nil

-- Buat lampu kepala
local function addHeadLamp(char)
    local head = char:FindFirstChild("Head")
    if not head then return end
    if char:FindFirstChild("HeadLamp") then return end

    headLamp = Instance.new("Part")
    headLamp.Name = "HeadLamp"
    headLamp.Size = Vector3.new(0.5,0.5,0.5)
    headLamp.Shape = Enum.PartType.Ball
    headLamp.Color = Color3.fromRGB(255,255,255)
    headLamp.Material = Enum.Material.Neon
    headLamp.Anchored = false
    headLamp.CanCollide = false
    headLamp.CFrame = head.CFrame * CFrame.new(0,0.8,0)
    headLamp.Parent = char

    local weld = Instance.new("WeldConstraint")
    weld.Part0 = head
    weld.Part1 = headLamp
    weld.Parent = headLamp

    local light = Instance.new("PointLight")
    light.Color = Color3.fromRGB(255,255,255)
    light.Range = 100
    light.Brightness = 2
    light.Parent = headLamp
end

-- Hapus lampu kepala
local function removeHeadLamp()
    if headLamp and headLamp.Parent then
        headLamp:Destroy()
    end
    headLamp = nil
end

-- Toggle Lampu
LampBtn.MouseButton1Click:Connect(function()
    lampOn = not lampOn
    local char = Player.Character or Player.CharacterAdded:Wait()
    if lampOn then
        addHeadLamp(char)
        setButtonActive(LampBtn, true)
    else
        removeHeadLamp()
        setButtonActive(LampBtn, false)
    end
end)

-- Kalau respawn, otomatis pasang lagi kalau tombol masih ON
Player.CharacterAdded:Connect(function(char)
    if lampOn then
        task.wait(1)
        addHeadLamp(char)
        setButtonActive(LampBtn, true)
    else
        setButtonActive(LampBtn, false)
    end
end)

-- Infinite Jump
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

local infiniteJumpEnabled = false
local jumpPowerBoost = 25
local slowFallSpeed = -50

local JumpBtn = createButton("🦘", "Infinite Jump")

-- Update refs saat respawn
local function updateCharacterRefs(char)
    character = char
    humanoid = char:WaitForChild("Humanoid")
    root = char:WaitForChild("HumanoidRootPart")
end
player.CharacterAdded:Connect(updateCharacterRefs)

-- Infinite jump
UserInputService.JumpRequest:Connect(function()
    if infiniteJumpEnabled and humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        local goalVelocity = Vector3.new(root.Velocity.X, jumpPowerBoost, root.Velocity.Z)
        local tween = TweenService:Create(root, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Velocity = goalVelocity})
        tween:Play()
    end
end)

-- Slow fall
RunService.Stepped:Connect(function()
    if humanoid and infiniteJumpEnabled then
        if humanoid:GetState() == Enum.HumanoidStateType.Freefall then
            if root.Velocity.Y < slowFallSpeed then
                root.Velocity = Vector3.new(root.Velocity.X, slowFallSpeed, root.Velocity.Z)
            end
        end
    end
end)

-- Toggle tombol Infinite Jump
JumpBtn.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    setButtonActive(JumpBtn, infiniteJumpEnabled)
end)

-- Speed
local Player = game.Players.LocalPlayer

local SpeedBtn = createButton("⚡", "Speed")
local speedOn = false
local selendangPart = nil

-- Warna pelangi
local colors = {
    Color3.fromRGB(255,0,0),
    Color3.fromRGB(255,127,0),
    Color3.fromRGB(255,255,0),
    Color3.fromRGB(0,255,0),
    Color3.fromRGB(0,0,255),
    Color3.fromRGB(75,0,130),
    Color3.fromRGB(148,0,211)
}

local function lerpColor(c1, c2, t)
    return Color3.new(
        c1.R + (c2.R - c1.R) * t,
        c1.G + (c2.G - c1.G) * t,
        c1.B + (c2.B - c1.B) * t
    )
end

-- Buat selendang
local function addSelendang(char)
    if selendangPart then
        selendangPart:Destroy()
        selendangPart = nil
    end

    local torso = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("UpperTorso")
    if not torso then return end

    selendangPart = Instance.new("Part")
    selendangPart.Name = "SelendangPart"
    selendangPart.Size = Vector3.new(0.5,0.5,0.5)
    selendangPart.Transparency = 1
    selendangPart.Anchored = false
    selendangPart.CanCollide = false
    selendangPart.CFrame = torso.CFrame
    selendangPart.Parent = char

    local weld = Instance.new("WeldConstraint")
    weld.Part0 = torso
    weld.Part1 = selendangPart
    weld.Parent = selendangPart

    local trails = {}
    local spacing = -0.04
    local startY = 0.5

    for i = 1, 50 do
        local yPos = startY + (i-1) * spacing

        local attLeft = Instance.new("Attachment", selendangPart)
        attLeft.Position = Vector3.new(-1, yPos, 0)

        local attRight = Instance.new("Attachment", selendangPart)
        attRight.Position = Vector3.new(1, yPos, 0)

        local newTrail = Instance.new("Trail")
        newTrail.Attachment0 = attLeft
        newTrail.Attachment1 = attRight
        newTrail.Lifetime = 0.6
        newTrail.MinLength = 0.1
        newTrail.LightEmission = 1
        newTrail.Transparency = NumberSequence.new(0,1)
        newTrail.WidthScale = NumberSequence.new(0.5,0)
        newTrail.Parent = selendangPart

        table.insert(trails, newTrail)
    end

    task.spawn(function()
        local step = 0
        while speedOn and selendangPart and selendangPart.Parent do
            local idx1 = math.floor(step) % #colors + 1
            local idx2 = (idx1 % #colors) + 1
            local t = step % 1
            local col = lerpColor(colors[idx1], colors[idx2], t)

            for _, tr in ipairs(trails) do
                tr.Color = ColorSequence.new(col)
            end

            step = step + 0.02
            task.wait(0.03)
        end
    end)
end

local function removeSelendang()
    if selendangPart then
        selendangPart:Destroy()
        selendangPart = nil
    end
end

-- Toggle speed
SpeedBtn.MouseButton1Click:Connect(function()
    speedOn = not speedOn
    local char = Player.Character or Player.CharacterAdded:Wait()
    local hum = char:FindFirstChild("Humanoid")

    if speedOn then
        if hum then hum.WalkSpeed = 100 end
        addSelendang(char)
        setButtonActive(SpeedBtn, true)
    else
        if hum then hum.WalkSpeed = 16 end
        removeSelendang()
        setButtonActive(SpeedBtn, false)
    end
end)

-- Biar tetap aktif setelah respawn
Player.CharacterAdded:Connect(function(char)
    local hum = char:WaitForChild("Humanoid")
    task.wait(0.2)
    if speedOn then
        hum.WalkSpeed = 100
        addSelendang(char)
        setButtonActive(SpeedBtn, true)
    else
        hum.WalkSpeed = 16
        setButtonActive(SpeedBtn, false)
    end
end)

-- Fling
local FlingBtn = createButton("💥", "Tendang")
local hiddenfling = false
local flingThread

local function fling()
    local lp = Players.LocalPlayer
    while hiddenfling do
        RunService.Heartbeat:Wait()
        local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
        if hrp then
            local vel = hrp.Velocity
            hrp.Velocity = vel * 99999 + Vector3.new(0, 99999, 0)
            RunService.RenderStepped:Wait()
            hrp.Velocity = vel
        end
    end
end

FlingBtn.MouseButton1Click:Connect(function()
    hiddenfling = not hiddenfling
    if hiddenfling then
        setButtonActive(FlingBtn, true)
        flingThread = coroutine.create(fling)
        coroutine.resume(flingThread)
    else
        setButtonActive(FlingBtn, false)
    end
end)

-- Fly
local flying = false
local flySpeed = 100
local pressed = {Up=false,Down=false,Left=false,Right=false}
local bv, bg

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")
local runService = game:GetService("RunService")

-- Animations
local animations = {
    Idle = 0,
    Fly = 3337994105,
}

local animTracks = {}
local animator

local function setupAnimator(hum)
    animator = hum:FindFirstChildOfClass("Animator")
    if not animator then
        animator = Instance.new("Animator")
        animator.Parent = hum
    end

    animTracks = {}
    for name,id in pairs(animations) do
        if id ~= 0 then
            local anim = Instance.new("Animation")
            anim.AnimationId = "rbxassetid://"..id
            local track = animator:LoadAnimation(anim)
            track.Priority = Enum.AnimationPriority.Action
            track.Looped = true
            track:AdjustSpeed(1)
            animTracks[name] = track
        end
    end

    if animTracks.Idle then
        animTracks.Idle:Play()
    end
end

setupAnimator(humanoid)

-- DPad untuk Fly
local gui = Instance.new("ScreenGui")
gui.Name = "FlyGui"
gui.Parent = game:GetService("CoreGui")

local DPad = Instance.new("Frame")
DPad.Size = UDim2.new(0,140,0,140)
DPad.Position = UDim2.new(0,15,1,-155)
DPad.BackgroundColor3 = Color3.fromRGB(30, 60, 120)
DPad.BackgroundTransparency = 0.1
DPad.Visible = false
DPad.Parent = gui

local dpadCorner = Instance.new("UICorner")
dpadCorner.CornerRadius = UDim.new(0, 12)
dpadCorner.Parent = DPad

local dpadStroke = Instance.new("UIStroke")
dpadStroke.Color = Color3.fromRGB(70, 130, 200)
dpadStroke.Thickness = 2
dpadStroke.Parent = DPad

local function createFlyButton(name,pos)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(0,45,0,45)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(50, 100, 180)
    btn.BackgroundTransparency = 0.1
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.Text = name
    btn.TextSize = 20
    btn.Parent = DPad
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    local btnStroke = Instance.new("UIStroke")
    btnStroke.Color = Color3.fromRGB(100, 150, 220)
    btnStroke.Thickness = 1.5
    btnStroke.Parent = btn
    
    return btn
end

local UpBtn = createFlyButton("↑", UDim2.new(0.5,-22,0,8))
local DownBtn = createFlyButton("↓", UDim2.new(0.5,-22,1,-53))
local LeftBtn = createFlyButton("←", UDim2.new(0,8,0.5,-22))
local RightBtn = createFlyButton("→", UDim2.new(1,-53,0.5,-22))

local function setupButton(btn,key)
    btn.MouseButton1Down:Connect(function() 
        pressed[key]=true 
        TweenService:Create(btn, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(70, 130, 200)}):Play()
    end)
    btn.MouseButton1Up:Connect(function() 
        pressed[key]=false 
        TweenService:Create(btn, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(50, 100, 180)}):Play()
    end)
end
setupButton(UpBtn,"Up")
setupButton(DownBtn,"Down")
setupButton(LeftBtn,"Left")
setupButton(RightBtn,"Right")

-- Tombol Fly
local FlyBtn = createButton("🕊️", "Fly")

-- Fungsi Matikan Fly
local function disableFly()
    flying = false
    DPad.Visible = false
    setButtonActive(FlyBtn, false)
    if bv then bv:Destroy() bv=nil end
    if bg then bg:Destroy() bg=nil end
    if animTracks.Fly and animTracks.Fly.IsPlaying then animTracks.Fly:Stop() end
    if animTracks.Idle and not animTracks.Idle.IsPlaying then animTracks.Idle:Play() end
end

-- Toggle Fly
FlyBtn.MouseButton1Click:Connect(function()
    if flying then
        disableFly()
    else
        flying = true
        DPad.Visible = true
        setButtonActive(FlyBtn, true)

        if animTracks.Idle and animTracks.Idle.IsPlaying then
            animTracks.Idle:Stop()
        end
        if animTracks.Fly and not animTracks.Fly.IsPlaying then
            animTracks.Fly:Play()
        end
    end
end)

-- Fly Movement
runService.RenderStepped:Connect(function()
    if flying then
        if not bv then
            bv = Instance.new("BodyVelocity")
            bv.MaxForce = Vector3.new(1e5,1e5,1e5)
            bv.Velocity = Vector3.zero
            bv.Parent = root
        end
        if not bg then
            bg = Instance.new("BodyGyro")
            bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
            bg.CFrame = root.CFrame
            bg.Parent = root
        end

        local cam = workspace.CurrentCamera.CFrame
        local moveDir = Vector3.zero
        if pressed.Up then moveDir = moveDir + cam.LookVector end
        if pressed.Down then moveDir = moveDir - cam.LookVector end
        if pressed.Left then moveDir = moveDir - cam.RightVector end
        if pressed.Right then moveDir = moveDir + cam.RightVector end

        if moveDir.Magnitude > 0 then moveDir = moveDir.Unit end
        bv.Velocity = moveDir * flySpeed

        local lookVec = Vector3.new(bv.Velocity.X,0,bv.Velocity.Z)
        if lookVec.Magnitude == 0 then
            lookVec = Vector3.new(cam.LookVector.X,0,cam.LookVector.Z)
        end
        bg.CFrame = CFrame.new(root.Position, root.Position + lookVec)
    end
end)

-- Reset Saat Mati
humanoid.Died:Connect(disableFly)
player.CharacterAdded:Connect(function(char)
    character = char
    humanoid = char:WaitForChild("Humanoid")
    root = char:WaitForChild("HumanoidRootPart")
    setupAnimator(humanoid)
    humanoid.Died:Connect(disableFly)
end)

-- Unanchor
local UnanchorBtn = createButton("🔓", "Unanchor")
local player = game.Players.LocalPlayer
local aktif = false
local folder, attachment1, koneksi1
local RADIUS = 500

-- Scan part sekitar player
local function scanParts()
    local parts = {}
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not root then return parts end

    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") 
        and not part.Anchored 
        and not part:IsDescendantOf(player.Character) then
            local dist = (part.Position - root.Position).Magnitude
            if dist <= RADIUS then
                table.insert(parts, part)
            end
        end
    end
    return parts
end

-- Apply force ke part
local function applyForce(part)
    if not part or not part.Parent then return end
    part.CanCollide = false

    for _, x in next, part:GetChildren() do
        if x:IsA("BodyAngularVelocity") or x:IsA("BodyForce") or x:IsA("BodyGyro") 
        or x:IsA("BodyPosition") or x:IsA("BodyThrust") or x:IsA("BodyVelocity")
        or x:IsA("RocketPropulsion") then
            x:Destroy()
        end
    end

    if not part:FindFirstChildOfClass("Torque") then
        local torque = Instance.new("Torque", part)
        torque.Torque = Vector3.new(100000,100000,100000)
        local align = Instance.new("AlignPosition", part)
        local at2 = Instance.new("Attachment", part)
        torque.Attachment0 = at2
        align.MaxForce = 9e15
        align.MaxVelocity = math.huge
        align.Responsiveness = 200
        align.Attachment0 = at2
        if attachment1 then
            align.Attachment1 = attachment1
        end
    end

    if attachment1 then
        local dist = (part.Position - attachment1.WorldPosition).Magnitude
        if dist <= RADIUS then
            local arah = (attachment1.WorldPosition - part.Position).Unit
            part.AssemblyLinearVelocity = arah * 200
        end
    end
end

-- Mulai Unanchor
local function mulaiUnanchor()
    folder = Instance.new("Folder", workspace)
    local part = Instance.new("Part", folder)
    part.Anchored = true
    part.CanCollide = false
    part.Transparency = 1
    attachment1 = Instance.new("Attachment", part)

    task.spawn(function()
        settings().Physics.AllowSleep = false
        while aktif and task.wait() do
            for _, pl in next, game.Players:GetPlayers() do
                if pl ~= player then
                    pl.MaximumSimulationRadius = 0
                    sethiddenproperty(pl, "SimulationRadius", 0)
                end
            end
            player.MaximumSimulationRadius = math.pow(math.huge, math.huge)
            setsimulationradius(math.huge)
        end
    end)

    koneksi1 = game:GetService("RunService").Stepped:Connect(function()
        local list = scanParts()
        for _, v in pairs(list) do
            applyForce(v)
        end
    end)
end

-- Stop Unanchor
local function stopUnanchor()
    if koneksi1 then koneksi1:Disconnect() end
    if folder then folder:Destroy() end
    folder, attachment1 = nil, nil
end

-- Tombol Unanchor
UnanchorBtn.MouseButton1Click:Connect(function()
    aktif = not aktif
    if aktif then
        setButtonActive(UnanchorBtn, true)
        mulaiUnanchor()
    else
        setButtonActive(UnanchorBtn, false)
        stopUnanchor()
    end
end)

-- Anti Lag
local AntiLagBtn = createButton("🛡️", "Anti Lag")
local antiLagActive = false
local connections = {}
local originalStates = {}

local function saveState(v)
    if not originalStates[v] then
        if v:IsA("Part") or v:IsA("Union") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") or v:IsA("MeshPart") then
            originalStates[v] = {
                Material = v.Material,
                Reflectance = v.Reflectance,
                TextureID = v:IsA("MeshPart") and v.TextureID or nil
            }
        elseif v:IsA("Decal") or v:IsA("Texture") then
            originalStates[v] = {Transparency = v.Transparency}
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            originalStates[v] = {Lifetime = v.Lifetime, Enabled = v.Enabled}
        elseif v:IsA("Explosion") then
            originalStates[v] = {BlastPressure = v.BlastPressure, BlastRadius = v.BlastRadius}
        elseif v:IsA("Fire") or v:IsA("Smoke") or v:IsA("Sparkles") then
            originalStates[v] = {Enabled = v.Enabled}
        elseif v:IsA("Sound") then
            originalStates[v] = {Playing = v.Playing}
        elseif v:IsA("Light") or v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then
            originalStates[v] = {Enabled = v.Enabled}
        end
    end
end

local function makeBurik(v)
    saveState(v)

    if v:IsA("Part") or v:IsA("Union") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") then
        v.Material = "Plastic"
        v.Reflectance = 0
    elseif v:IsA("Decal") or v:IsA("Texture") then
        v.Transparency = 1
    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
        v.Lifetime = NumberRange.new(0)
        v.Enabled = false
    elseif v:IsA("Explosion") then
        v.BlastPressure = 1
        v.BlastRadius = 1
    elseif v:IsA("Fire") or v:IsA("Smoke") or v:IsA("Sparkles") then
        v.Enabled = false
    elseif v:IsA("MeshPart") then
        v.Material = "Plastic"
        v.Reflectance = 0
        v.TextureID = ""
    elseif v:IsA("Sound") then
        v.Playing = false
    elseif v:IsA("Light") or v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then
        v.Enabled = false
    end
end

local function applyAntiLag()
    local l = game.Lighting
    local t = game.Workspace.Terrain

    originalStates[t] = {
        WaterWaveSize = t.WaterWaveSize,
        WaterWaveSpeed = t.WaterWaveSpeed,
        WaterReflectance = t.WaterReflectance,
        WaterTransparency = t.WaterTransparency
    }
    originalStates[l] = {
        GlobalShadows = l.GlobalShadows,
        FogEnd = l.FogEnd,
        Brightness = l.Brightness
    }

    t.WaterWaveSize = 0
    t.WaterWaveSpeed = 0
    t.WaterReflectance = 0
    t.WaterTransparency = 0
    l.GlobalShadows = false
    l.FogEnd = 9e9
    l.Brightness = 0
    settings().Rendering.QualityLevel = "Level01"

    for _, v in pairs(game:GetDescendants()) do
        makeBurik(v)
    end

    for _, e in pairs(l:GetChildren()) do
        if e:IsA("BlurEffect") or e:IsA("SunRaysEffect") or e:IsA("ColorCorrectionEffect") or e:IsA("BloomEffect") or e:IsA("DepthOfFieldEffect") then
            originalStates[e] = {Enabled = e.Enabled}
            e.Enabled = false
        end
    end

    connections[#connections+1] = game.DescendantAdded:Connect(function(obj)
        if antiLagActive then
            makeBurik(obj)
        end
    end)
end

local function resetAntiLag()
    for obj, state in pairs(originalStates) do
        if obj and obj.Parent then
            for prop, val in pairs(state) do
                pcall(function()
                    obj[prop] = val
                end)
            end
        end
    end
    originalStates = {}

    for _, c in pairs(connections) do
        c:Disconnect()
    end
    connections = {}
end

AntiLagBtn.MouseButton1Click:Connect(function()
    antiLagActive = not antiLagActive
    if antiLagActive then
        setButtonActive(AntiLagBtn, true)
        applyAntiLag()
    else
        setButtonActive(AntiLagBtn, false)
        resetAntiLag()
    end
end)

-- Private Server
local PrivateServerBtn = createButton("🔒", "Private Server")
local active = false

local function makePrivateServer()
    local CodeGenerator = loadstring(game:HttpGet("https://raw.githubusercontent.com/Vexx3/zylx-hub/refs/heads/main/ServerCodeGenerator.luau"))()
    local accessCode = CodeGenerator:GenerateReservedServerCode(game.PlaceId)

    game.RobloxReplicatedStorage.ContactListIrisInviteTeleport:FireServer(game.PlaceId, "", accessCode)

    game.StarterGui:SetCore("SendNotification", {
        Title = "Private Server Created",
        Text = "private server di mulai tunggu 2 detik",
        Duration = 5
    })
end

PrivateServerBtn.MouseButton1Click:Connect(function()
    active = not active
    if active then
        setButtonActive(PrivateServerBtn, true)
        makePrivateServer()
    else
        setButtonActive(PrivateServerBtn, false)
    end
end)

-- Set layout order untuk tombol-tombol agar tersusun rapi
SpectatorBtn.LayoutOrder = 1
RecBtn.LayoutOrder = 2
AirwalkBtn.LayoutOrder = 3
LampBtn.LayoutOrder = 4
JumpBtn.LayoutOrder = 5
SpeedBtn.LayoutOrder = 6
FlingBtn.LayoutOrder = 7
FlyBtn.LayoutOrder = 8
UnanchorBtn.LayoutOrder = 9
AntiLagBtn.LayoutOrder = 10
PrivateServerBtn.LayoutOrder = 11